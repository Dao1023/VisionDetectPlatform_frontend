<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图库管理系统</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
        }
        
        .gallery-item {
            transition: transform 0.3s ease;
        }
        
        .gallery-item:hover {
            transform: scale(1.03);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow: auto;
        }
        
        .upload-area {
            border: 2px dashed #ccc;
            border-radius: 8px;
            transition: border-color 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: #3b82f6;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- 导航栏 -->
    <nav class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-gray-800">图库管理系统</h1>
            <div class="flex space-x-4">
                <button id="uploadBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors">
                    <i class="fas fa-upload mr-2"></i>上传图片
                </button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-md transition-colors">
                    <i class="fas fa-cog mr-2"></i>设置
                </button>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-6 flex">
        <!-- 侧边栏 -->
        <aside class="w-64 bg-white shadow-md rounded-lg p-4 mr-6 h-fit">
            <h2 class="text-lg font-semibold mb-4 text-gray-800">分类</h2>
            <ul class="space-y-2">
                <li>
                    <button class="category-btn w-full text-left px-3 py-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 transition-colors" data-category="all">
                        <i class="fas fa-th-large mr-2"></i>全部图片
                    </button>
                </li>
                <li>
                    <button class="category-btn w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 transition-colors" data-category="nature">
                        <i class="fas fa-tree mr-2"></i>自然风光
                    </button>
                </li>
                <li>
                    <button class="category-btn w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 transition-colors" data-category="city">
                        <i class="fas fa-building mr-2"></i>城市建筑
                    </button>
                </li>
                <li>
                    <button class="category-btn w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 transition-colors" data-category="people">
                        <i class="fas fa-user mr-2"></i>人物肖像
                    </button>
                </li>
                <li>
                    <button class="category-btn w-full text-left px-3 py-2 rounded-md hover:bg-gray-100 transition-colors" data-category="food">
                        <i class="fas fa-utensils mr-2"></i>美食
                    </button>
                </li>
            </ul>

            <h2 class="text-lg font-semibold mb-4 mt-8 text-gray-800">标签</h2>
            <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm cursor-pointer hover:bg-gray-200 transition-colors">
                    风景
                </span>
                <span class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm cursor-pointer hover:bg-gray-200 transition-colors">
                    旅行
                </span>
                <span class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm cursor-pointer hover:bg-gray-200 transition-colors">
                    建筑
                </span>
                <span class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm cursor-pointer hover:bg-gray-200 transition-colors">
                    人物
                </span>
                <span class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm cursor-pointer hover:bg-gray-200 transition-colors">
                    美食
                </span>
                <span class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm cursor-pointer hover:bg-gray-200 transition-colors">
                    动物
                </span>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="flex-1">
            <!-- 搜索和筛选 -->
            <div class="bg-white shadow-md rounded-lg p-4 mb-6">
                <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                    <div class="relative w-full md:w-1/2">
                        <input type="text" placeholder="搜索图片..." class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <div class="flex space-x-3">
                        <select class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>最新上传</option>
                            <option>最多查看</option>
                            <option>名称排序</option>
                        </select>
                        <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-md transition-colors">
                            <i class="fas fa-filter mr-2"></i>筛选
                        </button>
                    </div>
                </div>
            </div>

            <!-- 上传区域 -->
            <div id="uploadArea" class="upload-area p-8 text-center mb-6 cursor-pointer">
                <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                <p class="text-gray-600 mb-2">拖拽图片到这里上传，或者</p>
                <button class="text-blue-500 hover:text-blue-700 font-medium">点击浏览文件</button>
                <p class="text-xs text-gray-400 mt-2">支持 JPG, PNG, GIF 格式，最大 10MB</p>
                <input type="file" id="fileInput" class="hidden" accept="image/*" multiple>
            </div>

            <!-- 图库网格 -->
            <div class="gallery-grid" id="galleryGrid">
                <!-- 图片将通过JavaScript动态生成 -->
            </div>
        </main>
    </div>

    <!-- 图片详情模态框 -->
    <div id="imageModal" class="modal">
        <div class="modal-content bg-white rounded-lg max-w-4xl mx-auto my-8 overflow-hidden relative">
            <button id="closeModal" class="absolute top-4 right-4 bg-black bg-opacity-50 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-70 transition-colors">
                <i class="fas fa-times"></i>
            </button>
            <div class="p-4">
                <img id="modalImage" src="" alt="大图预览" class="w-full h-auto max-h-[70vh] object-contain">
                <div class="mt-4">
                    <h3 id="modalTitle" class="text-xl font-bold text-gray-800"></h3>
                    <p id="modalDescription" class="text-gray-600 mt-2"></p>
                    <div class="mt-4 flex flex-wrap gap-2">
                        <span class="px-2 py-1 bg-blue-100 text-blue-600 rounded-md text-sm" id="modalCategory"></span>
                        <div id="modalTags" class="flex flex-wrap gap-2 mt-2"></div>
                    </div>
                    <div class="mt-4 flex space-x-3">
                        <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors">
                            <i class="fas fa-edit mr-2"></i>编辑
                        </button>
                        <button class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md transition-colors">
                            <i class="fas fa-trash-alt mr-2"></i>删除
                        </button>
                        <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-md transition-colors">
                            <i class="fas fa-download mr-2"></i>下载
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 模拟图片数据
        const images = [
            {
                id: 1,
                url: 'https://picsum.photos/600/400?random=1',
                thumbnailUrl: 'https://picsum.photos/300/200?random=1',
                title: '山间湖泊',
                description: '壮丽的山间湖泊，湖水清澈见底，周围环绕着茂密的森林和陡峭的山峰。',
                category: 'nature',
                categoryName: '自然风光',
                tags: ['风景', '湖泊', '自然', '旅行'],
                uploadDate: '2023-05-15'
            },
            {
                id: 2,
                url: 'https://picsum.photos/600/400?random=2',
                thumbnailUrl: 'https://picsum.photos/300/200?random=2',
                title: '城市天际线',
                description: '现代化城市的天际线，高楼林立，夜晚的灯光璀璨夺目。',
                category: 'city',
                categoryName: '城市建筑',
                tags: ['城市', '建筑', '天际线', '夜景'],
                uploadDate: '2023-06-20'
            },
            {
                id: 3,
                url: 'https://picsum.photos/600/400?random=3',
                thumbnailUrl: 'https://picsum.photos/300/200?random=3',
                title: '人物肖像',
                description: '一位年轻女子的肖像照，表情自然，光线柔和。',
                category: 'people',
                categoryName: '人物肖像',
                tags: ['人物', '肖像', '人像', '摄影'],
                uploadDate: '2023-07-08'
            },
            {
                id: 4,
                url: 'https://picsum.photos/600/400?random=4',
                thumbnailUrl: 'https://picsum.photos/300/200?random=4',
                title: '美食拼盘',
                description: '精致的美食拼盘，色彩鲜艳，香气四溢，让人垂涎欲滴。',
                category: 'food',
                categoryName: '美食',
                tags: ['美食', '餐饮', '烹饪', '美味'],
                uploadDate: '2023-08-12'
            },
            {
                id: 5,
                url: 'https://picsum.photos/600/400?random=5',
                thumbnailUrl: 'https://picsum.photos/300/200?random=5',
                title: '海滩日落',
                description: '美丽的海滩日落景象，天空被染成橙红色，海浪轻轻拍打着沙滩。',
                category: 'nature',
                categoryName: '自然风光',
                tags: ['海滩', '日落', '海洋', '度假'],
                uploadDate: '2023-09-05'
            },
            {
                id: 6,
                url: 'https://picsum.photos/600/400?random=6',
                thumbnailUrl: 'https://picsum.photos/300/200?random=6',
                title: '古老建筑',
                description: '一座具有历史感的古老建筑，建筑精美，细节丰富。',
                category: 'city',
                categoryName: '城市建筑',
                tags: ['建筑', '历史', '文化', '古迹'],
                uploadDate: '2023-10-18'
            },
            {
                id: 7,
                url: 'https://picsum.photos/600/400?random=7',
                thumbnailUrl: 'https://picsum.photos/300/200?random=7',
                title: '森林徒步',
                description: '茂密的森林中，一条小路蜿蜒向前，阳光透过树叶洒在地上。',
                category: 'nature',
                categoryName: '自然风光',
                tags: ['森林', '徒步', '探险', '自然'],
                uploadDate: '2023-11-22'
            },
            {
                id: 8,
                url: 'https://picsum.photos/600/400?random=8',
                thumbnailUrl: 'https://picsum.photos/300/200?random=8',
                title: '咖啡时光',
                description: '一杯热气腾腾的咖啡，搭配精美的甜点，享受悠闲的午后时光。',
                category: 'food',
                categoryName: '美食',
                tags: ['咖啡', '甜点', '下午茶', '休闲'],
                uploadDate: '2023-12-30'
            }
        ];

        // DOM 元素
        const galleryGrid = document.getElementById('galleryGrid');
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const modalTitle = document.getElementById('modalTitle');
        const modalDescription = document.getElementById('modalDescription');
        const modalCategory = document.getElementById('modalCategory');
        const modalTags = document.getElementById('modalTags');
        const closeModal = document.getElementById('closeModal');
        const uploadBtn = document.getElementById('uploadBtn');
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const categoryBtns = document.querySelectorAll('.category-btn');

        // 渲染图片网格
        function renderGallery(imagesToRender) {
            galleryGrid.innerHTML = '';
            
            imagesToRender.forEach(image => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item bg-white rounded-lg shadow-md overflow-hidden';
                galleryItem.innerHTML = `
                    <div class="relative">
                        <img src="${image.thumbnailUrl}" alt="${image.title}" class="w-full h-48 object-cover cursor-pointer">
                        <div class="absolute top-2 right-2 flex space-x-1">
                            <button class="bg-white bg-opacity-70 hover:bg-opacity-100 rounded-full w-6 h-6 flex items-center justify-center text-gray-700 transition-colors">
                                <i class="fas fa-heart text-xs"></i>
                            </button>
                            <button class="bg-white bg-opacity-70 hover:bg-opacity-100 rounded-full w-6 h-6 flex items-center justify-center text-gray-700 transition-colors">
                                <i class="fas fa-ellipsis-v text-xs"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-3">
                        <h3 class="font-semibold text-gray-800 truncate">${image.title}</h3>
                        <p class="text-sm text-gray-500 mt-1">${image.uploadDate}</p>
                        <div class="flex flex-wrap gap-1 mt-2">
                            <span class="px-2 py-0.5 bg-blue-100 text-blue-600 rounded-full text-xs">${image.categoryName}</span>
                        </div>
                    </div>
                `;
                
                // 点击图片打开模态框
                galleryItem.querySelector('img').addEventListener('click', () => {
                    openImageModal(image);
                });
                
                galleryGrid.appendChild(galleryItem);
            });
        }

        // 打开图片详情模态框
        function openImageModal(image) {
            modalImage.src = image.url;
            modalTitle.textContent = image.title;
            modalDescription.textContent = image.description;
            modalCategory.textContent = image.categoryName;
            
            // 渲染标签
            modalTags.innerHTML = '';
            image.tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs';
                tagElement.textContent = tag;
                modalTags.appendChild(tagElement);
            });
            
            imageModal.style.display = 'block';
            document.body.style.overflow = 'hidden'; // 防止背景滚动
        }

        // 关闭模态框
        function closeImageModal() {
            imageModal.style.display = 'none';
            document.body.style.overflow = ''; // 恢复背景滚动
        }

        // 分类筛选
        function setupCategoryFilter() {
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // 移除所有按钮的选中状态
                    categoryBtns.forEach(b => {
                        b.classList.remove('bg-blue-500', 'text-white');
                        b.classList.add('hover:bg-gray-100');
                    });
                    
                    // 添加当前按钮的选中状态
                    btn.classList.add('bg-blue-500', 'text-white');
                    btn.classList.remove('hover:bg-gray-100');
                    
                    const category = btn.dataset.category;
                    
                    if (category === 'all') {
                        renderGallery(images);
                    } else {
                        const filteredImages = images.filter(image => image.category === category);
                        renderGallery(filteredImages);
                    }
                });
            });
        }

        // 上传功能
        function setupUpload() {
            uploadBtn.addEventListener('click', () => {
                fileInput.click();
            });
            
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('border-blue-500');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('border-blue-500');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('border-blue-500');
                
                if (e.dataTransfer.files.length) {
                    handleFiles(e.dataTransfer.files);
                }
            });
            
            fileInput.addEventListener('change', () => {
                if (fileInput.files.length) {
                    handleFiles(fileInput.files);
                }
            });
        }

        // 处理上传的文件
        function handleFiles(files) {
            // 这里只是模拟上传，实际项目中会有AJAX请求
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                
                // 检查文件类型
                if (!file.type.startsWith('image/')) {
                    alert('请上传图片文件！');
                    continue;
                }
                
                // 检查文件大小
                if (file.size > 10 * 1024 * 1024) { // 10MB
                    alert('文件大小不能超过10MB！');
                    continue;
                }
                
                // 模拟上传成功，创建临时图片对象
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newImage = {
                        id: images.length + 1,
                        url: e.target.result,
                        thumbnailUrl: e.target.result,
                        title: file.name,
                        description: '新上传的图片',
                        category: 'nature', // 默认分类
                        categoryName: '自然风光',
                        tags: ['新上传'],
                        uploadDate: new Date().toISOString().split('T')[0]
                    };
                    
                    // 添加到图片数组并重新渲染
                    images.unshift(newImage);
                    renderGallery(images);
                };
                reader.readAsDataURL(file);
            }
            
            // 重置文件输入
            fileInput.value = '';
        }

        // 初始化
        function init() {
            renderGallery(images);
            setupCategoryFilter();
            setupUpload();
            
            // 关闭模态框
            closeModal.addEventListener('click', closeImageModal);
            
            // 点击模态框外部关闭
            imageModal.addEventListener('click', (e) => {
                if (e.target === imageModal) {
                    closeImageModal();
                }
            });
            
            // ESC键关闭模态框
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && imageModal.style.display === 'block') {
                    closeImageModal();
                }
            });
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>